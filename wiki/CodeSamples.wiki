#summary Snippets of code to get you started with TibiaAPI.
#labels Featured,Phase-Implementation

== Table of Contents ==
 * [CodeSamples#Get_a_client_object_to_work_with Get a client object to work with]
 * [CodeSamples#Using_the_proxy Using the proxy]
 * [CodeSamples#Perform_name_spy_or_level_spy Perform name spy or level spy]
 * [CodeSamples#Setup_a_global_keyboard_hook Setup a global keyboard hook]
 * [CodeSamples#Connect_to_an_OT_Server Connect to an OT Server]
 * [CodeSamples#Eat_a_mushroom_in_your_inventory Eat a mushroom in your inventory]
 * [CodeSamples#Attack_the_first_rat_found_in_the_battelist Attack the first rat found in the battelist]
 * [CodeSamples#Change_your_players_outfit_type_and_addon Change your players outfit type and addon]
 * [CodeSamples#Replace_all_the_trees_with_small_fir_trees Replace all the trees with small fir trees]

== Get a client object to work with ==
{{{
Client client = Util.ClientChooser.ShowBox();
}}}

== Using the proxy ==
{{{
// Start the proxy and attach event handlers
// Put this in Form_Load
client.StartProxy();
client.Proxy.PacketFromClient += (Proxy.PacketListener)PacketFromClient;
client.Proxy.PacketFromServer += (Proxy.PacketListener)PacketFromServer;

// Sample event handlers
private byte[] PacketFromClient(byte[] packet)
{
	LogPacket(packet, "CLIENT");
	return packet;
}

private byte[] PacketFromServer(byte[] packet)
{
	LogPacket(packet, "SERVER");
	return packet;
}

private void LogPacket(byte[] packet, string from)
{
	uxPackets.Invoke(new EventHandler(delegate
	{
		string s = "from " + from + Environment.NewLine;
		s += Packet.ByteArrayToHexString(packet) + Environment.NewLine + Environment.NewLine;
	}));
}
}}}

== Perform name spy or level spy ==
{{{
// Create a new map object
Map map = new Map(client);

// Show names on other floors
map.ShowNames(true);

// Move the screen to the floor below
map.ShowFloor(-1, true);
}}}

== Setup a global keyboard hook ==
Put the following in a button's click event. This example captures the hotkey Ctrl + Alt + A in the Tibia client only (doesn't let it go to the client). All other keypresses, client or otherwise, are ignored.
{{{
if (!KeyboardHook.Enabled)
{
	KeyboardHook.Enable();
	KeyboardHook.KeyDown = null;
	KeyboardHook.KeyDown += new KeyboardHook.HookHandler(delegate(Keys key)
	{
		if (client.IsActive())
		{
			if (KeyboardHook.Control && KeyboardHook.Alt && key == Keys.A)
			{
				string text = "You want to capture the hotkey " +
				KeyboardHook.KeyToString(key) + " in Tibia!";
				MessageBox.Show(text);
				return false;
			}
		}
		return true;
	});
	KeyboardHook.KeyDown += null;
}
else
{
	KeyboardHook.Disable();
}
}}}

== Connect to an OT Server ==
{{{
client.SetOT("radonia.net", 7171);
}}}

== Eat a mushroom in your inventory ==
{{{
Inventory inventory = new Inventory(client);
inventory.findItem(Tibia.Constants.Items.Food.WhiteMushroom).use();
}}}
Or, more efficiently (using the hotkey packets)
{{{
Inventory inventory = new Inventory(client);
inventory.useItem(Tibia.Constants.Items.Food.WhiteMushroom);
}}}

== Attack the first rat found in the battelist ==
{{{
BattleList blist = client.getBattleList();
blist.getCreature("rat").attack();
}}}

== Change your players outfit type and addon ==
{{{
Player player = client.getPlayer();
player.Outfit = Tibia.Constants.OutfitType.BeggarMale;
player.Addon = Tibia.Constants.OutfitAddon.Both;
}}}

== Replace all the trees with small fir trees ==
{{{
Map map = new Map(client);
map.replaceTrees();
}}}